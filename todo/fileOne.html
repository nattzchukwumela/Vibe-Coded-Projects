<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate Productivity Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
  :root {
    --primary: #6366f1;
    --primary-dark: #4f46e5;
    --bg: #f8fafc;
    --card: #ffffff;
    --text: #1e293b;
    --border: #e2e8f0;
    --danger: #ef4444;
    --success: #10b981;
  }
  [data-theme="dark"] {
    --bg: #0f172a;
    --card: #1e293b;
    --text: #e2e8f0;
    --border: #334155;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    transition: all 0.3s;
  }
  header {
    background: var(--primary);
    color: white;
    padding: 1rem;
    text-align: center;
    position: relative;
  }
  .theme-toggle {
    position: absolute;
    right: 1rem;
    top: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: white;
  }
  .container {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 0 1rem;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }
  @media (max-width: 900px) {
    .container { grid-template-columns: 1fr; }
  }
  .card {
    background: var(--card);
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    border: 1px solid var(--border);
  }
  h2 {
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--primary);
  }
  input, textarea, select, button {
    padding: 0.75rem;
    border-radius: 8px;
    border: 1px solid var(--border);
    font-size: 1rem;
    width: 100%;
    margin-bottom: 0.75rem;
  }
  button {
    background: var(--primary);
    color: white;
    border: none;
    cursor: pointer;
    font-weight: 600;
    transition: 0.2s;
  }
  button:hover { background: var(--primary-dark); }
  .btn-small {
    padding: 0.4rem 0.8rem;
    font-size: 0.9rem;
  }
  .btn-danger { background: var(--danger); }
  .btn-success { background: var(--success); }

  /* Notes */
  #notes-list .note {
    background: var(--bg);
    padding:[TRUNCATED] 1rem;
    border-radius: 8px;
    margin-bottom: 0.75rem;
    border-left: 4px solid var(--primary);
    position: relative;
  }
  .note-actions {
    position: absolute;
    right: 0.5rem;
    top: 0.5rem;
    opacity: 0;
    transition: 0.2s;
  }
  .note:hover .note-actions { opacity: 1; }

  /* Todos */
  #todo-list li {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    background: var(--bg);
    border-radius: 8px;
    margin-bottom: 0.5rem;
    cursor: move;
    user-select: none;
  }
  #todo-list li.completed {
    text-decoration: line-through;
    opacity: 0.6;
  }
  #todo-list li input[type="checkbox"] {
    margin-right: 1rem;
    transform: scale(1.3);
  }

  /* Reminders */
  .reminder {
    background: var(--bg);
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 0.75rem;
    border-left: 4px solid #f59e0b;
    position: relative;
  }
  .reminder.overdue { border-left-color: var(--danger); background: #fee2e2; }

  /* Budget */
  .budget-summary {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
    text-align: center;
  }
  .budget-card {
    background: var(--bg);
    padding: 1rem;
    border-radius: 8px;
  }
  .progress-bar {
    height: 12px;
    background: #e2e8f0;
    border-radius: 6px;
    overflow: hidden;
    margin: 0.5rem 0;
  }
  .progress-fill {
    height: 100%;
    background: var(--primary);
    width: 0%;
    transition: width 0.6s ease;
  }
  .expense-list li {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border);
  }

  .tab-buttons {
    display: flex;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--border);
  }
  .tab-btn {
    flex: 1;
    padding: 0.75rem;
    background: none;
    border: none;
    cursor: pointer;
    font-weight: 600;
  }
  .tab-btn.active {
    border-bottom: 3px solid var(--primary);
    color: var(--primary);
  }
</style>
</head>
<body>

<header>
  <h1><i class="fas fa-brain"></i> Productivity Hub</h1>
  <button class="theme-toggle" id="themeToggle">
    <i class="fas fa-moon"></i>
  </button>
</header>

<div class="container">
  
  <!-- Notes + Reminders -->
  <div class="card">
    <div class="tab-buttons">
      <button class="tab-btn active" data-tab="notes">Notes</button>
      <button class="tab-btn" data-tab="reminders">Reminders</button>
    </div>

    <div id="notes-tab">
      <h2><i class="fas fa-sticky-note"></i> Quick Notes</h2>
      <textarea id="noteInput" placeholder="Write something amazing..."></textarea>
      <button id="addNote"><i class="fas fa-plus"></i> Add Note</button>
      <div id="notes-list"></div>
    </div>

    <div id="reminders-tab" style="display:none">
      <h2><i class="fas fa-bell"></i> Reminders</h2>
      <input type="text" id="reminderText" placeholder="Reminder text">
      <input type="datetime-local" id="reminderTime">
      <button id="addReminder"><i class="fas fa-bell"></i> Set Reminder</button>
      <div id="reminders-list"></div>
    </div>
  </div>

  <!-- Todo List -->
  <div class="card">
    <h2><i class="fas fa-tasks"></i> Todo List</h2>
    <input type="text" id="todoInput" placeholder="What needs to be done?">
    <button id="addTodo"><i class="fas fa-plus"></i> Add Task</button>
    <ul id="todo-list"></ul>
    <p><small>Drag tasks to reorder â€¢ Click checkbox to complete</small></p>
  </div>

  <!-- Budget Tracker -->
  <div class="card" style="grid-column: 1 / -1;">
    <h2><i class="fas fa-wallet"></i> Budget Tracker</h2>
    <div class="budget-summary">
      <div class="budget-card">
        <strong>Income</strong>
        <p id="totalIncome">$0</p>
      </div>
      <div class="budget-card">
        <strong>Expenses</strong>
        <p id="totalExpenses">$0</p>
      </div>
      <div class="budget-card">
        <strong>Balance</strong>
        <p id="balance">$0</p>
      </div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <p><small id="progressText">0% spent</small></p>

    <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin-top:1rem;">
      <div>
        <input type="number" id="incomeAmount" placeholder="Monthly income">
        <button id="setIncome" class="btn-success">Set Income</button>
      </div>
      <div>
        <input type="text" id="expenseName" placeholder="Expense name">
        <input type="number" id="expenseAmount" placeholder="Amount">
        <button id="addExpense" class="btn-danger">Add Expense</button>
      </div>
    </div>
    <ul class="expense-list" id="expenseList"></ul>
  </div>

</div>

<script>
// ============ THEME TOGGLE ============
const themeToggle = document.getElementById('themeToggle');
const body = document.body;
if (localStorage.getItem('theme') === 'dark') {
  body.setAttribute('data-theme', 'dark');
  themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
}
themeToggle.addEventListener('click', () => {
  if (body.getAttribute('data-theme') === 'dark') {
    body.removeAttribute('data-theme');
    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
    localStorage.setItem('theme', 'light');
  } else {
    body.setAttribute('data-theme', 'dark');
    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    localStorage.setItem('theme', 'dark');
  }
});

// ============ TABS ============
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('#notes-tab, #reminders-tab').forEach(tab => tab.style.display = 'none');
    document.getElementById(btn.dataset.tab + '-tab').style.display = 'block';
  });
});

// ============ NOTES ============
const noteInput = document.getElementById('noteInput');
const notesList = document.getElementById('notes-list');

function loadNotes() {
  const notes = JSON.parse(localStorage.getItem('notes') || '[]');
  notesList.innerHTML = '';
  notes.forEach((note, i) => {
    const div = document.createElement('div');
    div.className = 'note';
    div.innerHTML = `
      <div>${note.replace(/\n/g, '<br>')}</div>
      <div class="note-actions">
        <button class="btn-small btn-danger" onclick="deleteNote(${i})"><i class="fas fa-trash"></i></button>
      </div>
    `;
    notesList.appendChild(div);
  });
}

document.getElementById('addNote').addEventListener('click', () => {
  if (noteInput.value.trim()) {
    const notes = JSON.parse(localStorage.getItem('notes') || '[]');
    notes.push(noteInput.value.trim());
    localStorage.setItem('notes', JSON.stringify(notes));
    noteInput.value = '';
    loadNotes();
  }
});

function deleteNote(index) {
  const notes = JSON.parse(localStorage.getItem('notes') || '[]');
  notes.splice(index, 1);
  localStorage.setItem('notes', JSON.stringify(notes));
  loadNotes();
}
loadNotes();

// ============ TODO LIST ============
const todoInput = document.getElementById('todoInput');
const todoList = document.getElementById('todo-list');

function loadTodos() {
  const todos = JSON.parse(localStorage.getItem('todos') || '[]');
  todoList.innerHTML = '';
  todos.forEach((todo, i) => {
    const li = document.createElement('li');
    li.draggable = true;
    li.innerHTML = `
      <input type="checkbox" ${todo.completed ? 'checked' : ''} onchange="toggleTodo(${i})">
      <span ${todo.completed ? 'style="text-decoration:line-through;opacity:0.6"' : ''}>${todo.text}</span>
      <button class="btn-small btn-danger" style="margin-left:auto;" onclick="deleteTodo(${i})"><i class="fas fa-trash"></i></button>
    `;
    todoList.appendChild(li);
  });
  
  // Drag & Drop
  todoList.querySelectorAll('li').forEach(item => {
    item.addEventListener('dragstart', e => e.dataTransfer.setData('text/plain', item.index));
    item.addEventListener('dragover', e => e.preventDefault());
    item.addEventListener('drop', e => {
      e.preventDefault();
      const from = e.dataTransfer.getData('text/plain');
      const to = item.index;
      if (from !== to) {
        let todos = JSON.parse(localStorage.getItem('todos') || '[]');
        const [moved] = todos.splice(from, 1);
        todos.splice(to, 0, moved);
        localStorage.setItem('todos', JSON.stringify(todos));
        loadTodos();
      }
    });
  });
}

document.getElementById('addTodo').addEventListener('click', addTodo);
todoInput.addEventListener('keypress', e => e.key === 'Enter' && addTodo());

function addTodo() {
  if (todoInput.value.trim()) {
    const todos = JSON.parse(localStorage.getItem('todos') || '[]');
    todos.push({ text: todoInput.value.trim(), completed: false });
    localStorage.setItem('todos', JSON.stringify(todos));
    todoInput.value = '';
    loadTodos();
  }
}

function toggleTodo(i) {
  const todos = JSON.parse(localStorage.getItem('todos') || '[]');
  todos[i].completed = !todos[i].completed;
  localStorage.setItem('todos', JSON.stringify(todos));
  loadTodos();
}

function deleteTodo(i) {
  const todos = JSON.parse(localStorage.getItem('todos') || '[]');
  todos.splice(i, 1);
  localStorage.setItem('todos', JSON.stringify(todos));
  loadTodos();
}
loadTodos();

// ============ REMINDERS ============
const remindersList = document.getElementById('reminders-list');

function loadReminders() {
  const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
  remindersList.innerHTML = '';
  const now = Date.now();
  reminders.forEach((r, i) => {
    const time = newè½»è½» Date(r.time).getTime();
    const div = document.createElement('div');
    div.className = 'reminder' + (time < now ? ' overdue' : '');
    div.innerHTML = `
      <strong>${r.text}</strong><br>
      <small>${new Date(r.time).toLocaleString()}</small>
      <button class="btn-small btn-danger" style="float:right;" onclick="deleteReminder(${i})">Delete</button>
    `;
    remindersList.appendChild(div);
  });
}

document.getElementById('addReminder').addEventListener('click', () => {
  const text = document.getElementById('reminderText').value.trim();
  const time = document.getElementById('reminderTime').value;
  if (text && time) {
    const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
    reminders.push({ text, time });
    localStorage.setItem('reminders', JSON.stringify(reminders));
    document.getElementById('reminderText').value = '';
    document.getElementById('reminderTime').value = '';
    loadReminders();
    scheduleNotification(text, new Date(time).getTime());
  }
});

function deleteReminder(i) {
  const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
  reminders.splice(i, 1);
  localStorage.setItem('reminders', JSON.stringify(reminders));
  loadReminders();
}

function scheduleNotification(text, timestamp) {
  const now = Date.now();
  const delay = timestamp - now;
  if (delay > 0 && delay < 2147483647) { // max setTimeout delay
    setTimeout(() => {
      if (Notification.permission === "granted") {
        new Notification("Reminder!", { body: text, icon: "ðŸ””" });
        const audio = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-alarm-tone-1055.mp3");
        audio.play();
      }
    }, delay);
  }
}

// Request notification permission on load
if ("Notification" in window && Notification.permission === "default") {
  Notification.requestPermission();
}

setInterval(() => {
  loadReminders();
}, 60000); // refresh every minute
loadReminders();

// ============ BUDGET TRACKER ============
const totalIncomeEl = document.getElementById('totalIncome');
const totalExpensesEl = document.getElementById('totalExpenses');
const balanceEl = document.getElementById('balance');
const progressFill = document.getElementById('progressFill');
const progressText = document.getElementById('progressText');
const expenseList = document.getElementById('expenseList');

function loadBudget() {
  const income = parseFloat(localStorage.getItem('income') || '0');
  const expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
  
  const totalExp = expenses.reduce((sum, e) => sum + e.amount, 0);
  const balance = income - totalExp;
  
  totalIncomeEl.textContent = `$${income.toFixed(2)}`;
  totalExpensesEl.textContent = `$${totalExp.toFixed(2)}`;
  balanceEl.textContent = `$${balance.toFixed(2)}`;
  balanceEl.style.color = balance >= 0 ? 'var(--success)' : 'var(--danger)';
  
  const percentage = income > 0 ? (totalExp / income) * 100 : 0;
  progressFill.style.width = percentage + '%';
  progressText.textContent = `${percentage.toFixed(1)}% spent`;
  
  expenseList.innerHTML = '';
  expenses.forEach((exp, i) => {
    const li = document.createElement('li');
    li.innerHTML = `${exp.name} <span>$${exp.amount.toFixed(2)}</span>
      <button class="btn-small btn-danger" style="margin-left:10px; float:right;" onclick="deleteExpense(${i})">Ã—</button>`;
    expenseList.appendChild(li);
  });
}

document.getElementById('setIncome').addEventListener('click', () => {
  const amount = parseFloat(document.getElementById('incomeAmount').value);
  if (amount > 0) {
    localStorage.setItem('income', amount);
    document.getElementById('incomeAmount').value = '';
    loadBudget();
  }
});

document.getElementById('addExpense').addEventListener('click', () => {
  const name = document.getElementById('expenseName').value.trim();
  const amount = parseFloat(document.getElementById('expenseAmount').value);
  if (name && amount > 0) {
    const expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
    expenses.push({ name, amount });
    localStorage.setItem('expenses', JSON.stringify(expenses));
    document.getElementById('expenseName').value = '';
    document.getElementById('expenseAmount').value = '';
    loadBudget();
  }
});

function deleteExpense(i) {
  const expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
  expenses.splice(i, 1);
  localStorage.setItem('expenses', JSON.stringify(expenses));
  loadBudget();
}

loadBudget();

</script>
</body>
</html>